<!--
  COMM REPORT DATA - BANKOVIA FIN SVCS
  Written by: TheGreench, AS, ENG-I <greench@staff.libraryofcode.org>
    COPYRIGHT 2020
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <title>COMM REPORT DATA - BANKOVIA FIN SVCS</title>
    <!-- Links -->
    <link rel="icon" type="image/png" href="https://static.libraryofcode.org/library_of_code_comm_red.png">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- Metas -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Bankovia is the economy bot developed by the Library of Code Community.">
    <meta name="keywords" content="LOC, Discord, Jira, Library of Code, Bankovia">
    <!-- <meta name="url" content="When We Get It"> -->
    <meta name="image" content="//static.libraryofcode.org/library_of_code_comm_red.png">
    <meta name="theme-color" content="#ee831b">
    <!-- Scripts -->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <!-- Style -->
    <style>
        * {
        box-sizing: inherit;
        transition-property: all;
        transition-duration: .6s;
        transition-timing-function: ease;
        }
        #nav {
            padding: 20px;
            font-size: 18px;
            text-decoration: none;
            background-color: #333333;
            font-weight: bold;
            border-bottom: 2px solid black;
        }
        #footer {
            border-top: 2px solid black;
            background-color: #333333;
        }
        #hr-brand {
            width: 50%;
            margin-right:25%;
            margin-left: 255;
            background-color: white;
            height: 2px;
        }
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #505050;
        }
        #nav ul li a {
            color: white;
            border-radius: 10px 10px 10px 10px;
        }
        #nav ul li a:hover {
            background-color: white;
            color: #c71313;
            border-radius: 10px 10px 10px 10px;
        }
        #active {
            background-color: white;
            color: #c71313 !important;
        }
        #body {
            margin-top: 20px;
            margin-left: 8%;
            margin-right: 8%; 
            padding: 10px;
            background-color: #333333;
            border: 2px solid black;
            border-radius: 10px 10px 10px 10px;
            color: white;
        }
        #bodyCard {
            padding: 40px;
            background-color: #505050;
            border: 1px solid black;
            border-radius: 10px 10px 10px 10px;
        }
        #bodyCardTwo {
            padding: 40px;
            background-color: #333333;
            border: 1px solid black;
            border-radius: 10px 10px 10px 10px;
        }
        #h1EmbedStyle {
            border-left: 5px solid #c71313;
            border-radius: 5px 5px;
            padding: 5px;
        }
        #footer {
            padding: 20px;
            background-color: #333333;
            border-top: 2px solid black;
            color: white;
            text-align: center;
        }
        .bodySectionLi {
            color: #d3e62f;
        }
    </style>
</head>
<body>
    <!-- Main Div -->
    <div id="container">
        
        <!-- Navbar -->
        <nav id="nav">
            <p class="nav justify-content-center" style="color: white;font-size: 40px;">
                Bankovia
            </p>
            <p class="nav justify-content-center" style="color: white;font-size: 15px;">
                <i>The Community Store for Library Of Code sp-us</i>
            </p>
            <hr id="hr-brand">
            <ul class="nav justify-content-center">
                <li class="nav-item">
                  <a class="nav-link"href="/">Home</a>
                </li>
                &nbsp;
                <li class="nav-item">
                  <a class="nav-link" href="//loc.sh/discord">Discord Server</a>
                </li>
                &nbsp;
                <li class="nav-item">
                  <a class="nav-link" id="active" href="/loc-score-bankovia">Login - Account</a>
                </li>
                &nbsp;
                <li class="nav-item">
                    <a class="nav-link" href="//libraryofcode.org">Main Web</a>
                  </li>
            </ul>
        </nav>

        <!-- Body Content -->
        <div id="pre">
            <div id="body">
                <div id="bodyCard">
                    <h4 id="h1EmbedStyle">&nbsp;Enter your Personal Data</h4>
                    <p style="font-size: 17px;">You can get your PIN by running <strong>?score</strong> in your DMs with the Library of Code sp-us bot. You only need the last four digits.</p>
                    <div class="input-group mb-3">
                        <input id="pin" type="text" class="form-control col-md-3" placeholder="XXXX" aria-label="pin" aria-describedby="basic-addon3" maxlength="4">
                        <!-- - -->
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon">-</span>
                        </div>
                        <input id="userID" type="text" class="form-control col-md-6" placeholder="Your User ID" aria-label="pin" aria-describedby="basic-addon3">
                        <!-- Submit Personal Pin -->
                        <div class="input-group-append">
                            <div class="spinner-grow text-secondary" role="status">
                                <button class="btn btn-dark" type="submit" id="enterB">Enter</button>
                            </div>
                        </div>
                    </div>
                    <small id="emailHelp" class="form-text text-muted" style="color: #ffffff !important;">Don't Share the PIN with anyone.</small>
                </div>
            </div>
        </div>

        <!-- User Information -->
        <div id="data-pre" style="display: none">
            <br>
            <div id="body">
                <div id="bodyCard">
                    <h1 style="text-align: center;">&nbsp;<strong>User Information</strong></h1>
                    <br>
                    <!-- Personal Info Box -->
                    <div id="bodyCardTwo">
                        <h2 id="h1EmbedStyle">&nbsp;Personal Information</h2>
                        <p style="font-size: 20px;">
                            <ul>
                                <li><strong>User:</strong> <span id="bodyUserUsername" class="bodySectionLi"></span>#<span id="bodyUserTag" class="bodySectionLi"></span></li>
                                <li><strong>User ID:</strong> <span id="bodyUserID" class="bodySectionLi"></span></li>
                                <li><strong>Joined LOC At:</strong> <span id="bodyUserJoinedS" class="bodySectionLi" type="date"></span></li>
                                <li><strong>Flags: </strong> <span id="bodyUserFlags" class="bodySectionLi"></span></li>
                            </ul>
                        </p>
                    </div>
                    <br>
                    <!-- Extra Score Info Box -->
                    <div id="bodyCardTwo">
                        <h2 id="h1EmbedStyle">&nbsp;Extended</h2>
                        <p style="font-size:  20px;">
                            <ul>
                                <li><strong>Total Score (200 to 800): </strong> <span id="bodyTotalScore" class="bodySectionLi"></span></li>
                                <li><strong>Percentile (0 to 100th): </strong> <span id="bodyPercentile" class="bodySectionLi"></span></li>
                                <li><strong>Activity Score (10 to 98): </strong> <span id="bodyAC" class="bodySectionLi"></span></li>
                                <li><strong>Role Score (1 to N/A): </strong> <span id="bodyRC" class="bodySectionLi"></span></li>
                                <li><strong>Moderation Score (N/A to 2): </strong> <span id="bodyMC" class="bodySectionLi"></span></li>
                                <li><strong>Cloud Services Score (N/A to 10+): </strong> <span id="bodyCSC" class="bodySectionLi"></span></li>
                                <li><strong>Misc:</strong> <span id="bodyMisc" class="bodySectionLi"></span></li>
                                <li><strong>Other:</strong> <span id="bodyOther" class="bodySectionLi"></span></li>
                            </ul>
                        </p>
                    </div>
                    <br>
                    <!-- Bankovia User Info Box -->
                    <div id="bodyCardTwo">
                        <h2 id="h1EmbedStyle">&nbsp;Bankovia User Information</h2>
                        <p style="font-size:  20px;">
                            <ul>
                                <li><strong>Account ID: </strong> <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                <li><strong>Account Type [Personal/Business]: </strong> <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                <br>
                                <li><strong>Reputation Points: </strong> <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                <li><strong>Stolen From (Rubies): </strong> <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                <li><strong>Stolen From Others (Rubies): </strong> <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                <br>
                                <li>
                                    <strong>Currencies:</strong>
                                    <ul>
                                        <li>Gem Fragments: <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                        <li>Rubies: <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                        <li>Elixirs: <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                        <li>Crystals: <span class="bodySectionLi" id="bodyBankA">SOON</span></li>
                                    </ul>
                                </li>
                            </ul>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Invalid PIN -->
        <div class="modal" tabindex="-1" role="dialog" style="display: none" id="invalidPIN">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ERROR: Access Denied</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="js:invisible('invalidPIN') && visible('pre')">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>The Personal Indentification Number (PIN) you provided is invalid.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="js:invisible('invalidPIN') && visible('pre')" id="closeBtn">Close</button>
                </div>
                </div>
            </div>
        </div>

        <!-- Invalid Key -->
        <div class="modal" tabindex="-1" role="dialog" style="display: none" id="invalidKey">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ERROR: Access Denied</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="js:invisible('invalidKey') && visible('pre')">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>You must supply an Offer Code to continue.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="js:invisible('invalidKey') && visible('pre')" id="closeBtn">Close</button>
                </div>
                </div>
            </div>
        </div>

        <!-- 500 Service Modal -->
        <div class="modal" tabindex="-1" role="dialog" style="display: none" id="serviceE">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ERROR: Server Error</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="js:invisible('serviceE') && visible('pre')">
                    <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>The service is currently experiencing issues while processing, please try again later.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal" onclick="js:invisible('serviceE') && visible('pre')" id="closeBtn">Close</button>
                </div>
                </div>
            </div>
        </div>

        <br><br>

        <!-- Footer -->
        <div id="footer">
            <p>
                <a href="https://loc.sh/discord">Discord Server</a>
                <br>
                COMM REPORT DATA - BANKOVIA FIN SVCS
            </p>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function() {
            $('.btn').on('click', function() {
              var $this = $(this);
              var loadingText = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span> Loading...';
              if ($(this).html() !== loadingText) {
                $this.data('original-text', $(this).html());
                $this.html(loadingText);
              }
              setTimeout(function() {
                $this.html($this.data('original-text'));
              }, 2000);
            });
          })
        function visible(id) {
            document.getElementById(id).style.display = 'block';
        }
        function invisible(id) {
            document.getElementById(id).style.display = 'none';
        }
        // const axios = require('axios').default;
        document.getElementById('enterB').onclick = async function sendPostRequest() {
            const pin = document.getElementById('pin').value;
            const userID = document.getElementById('userID').value;
            if (pin < 4) return visible('invalidPIN');
            if (!userID) return visible('invalidPIN');
            const newPost = {
                url: 'https://bankovia-api.cloud.libraryofcode.org/soft-pull',
                method: 'post',
                headers: {
                    Authorization: pin,
                    'Content-Type': 'application/json',
                },
                body: {
                    user: userID,
                }
            };
            try {
                const resp = await axios(newPost);
                const d = resp.data.message;
                const date = d.memberInformation.joinedServerAt;
                const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
                const flags = d.memberInformation.flags;
                const arrayF = [];
                if (flags.includes('DISCORD_EMPLOYEE')) {arrayF.push('Discord Employee')};
                if (flags.includes('PARTNERED_SERVER_OWNER')) {arrayF.push('Partnered Server Owner')};
                if (flags.includes('HYPESQUAD_EVENTS')) {arrayF.push('Hypesquad Events')};
                if (flags.includes('HOUSE_BRAVERY')) {arrayF.push('House of Bravery')};
                if (flags.includes('HOUSE_BRILLIANCE')) {arrayF.push('House of Brilliance')};
                if (flags.includes('HOUSE_BALANCE')) {arrayF.push('House of Balance')};
                if (flags.includes('EARLY_SUPPORTER')) {arrayF.push('Early Supporter')};
                if (flags.includes('BUG_HUNTER_1')) {arrayF.push('Bug Hunter')};
                if (flags.includes('BUG_HUNTER_2')) {arrayF.push('Bug Hunter')};
                if (flags.includes('EARLY_VERIFIED_BOT_DEVELOPER')) {arrayF.push('Early Verified Bot Developer')};
                // Loc Score
                document.getElementById('bodyUserUsername').innerHTML = `${d.memberInformation.username}`
                document.getElementById('bodyUserTag').innerHTML = `${d.memberInformation.discriminator}`
                document.getElementById('bodyUserFlags').innerHTML = `${!arrayF.length ? 'N/A' : arrayF}`
                document.getElementById('bodyUserJoinedS').innerHTML = `${new Date(date).toLocaleDateString('en-US', options)}`
                document.getElementById('bodyUserID').innerHTML = `${d.userID}`;
                document.getElementById('bodyTotalScore').innerHTML = `${d.totalScore}`;
                document.getElementById('bodyPercentile').innerHTML = `${d.percentile}`;
                document.getElementById('bodyAC').innerHTML = `${d.activityScore}`;
                document.getElementById('bodyRC').innerHTML = `${d.roleScore}`;
                document.getElementById('bodyMC').innerHTML = `${d.moderationScore}`;
                document.getElementById('bodyCSC').innerHTML = `${d.cloudServicesScore}`;
                document.getElementById('bodyMisc').innerHTML = `${d.miscScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                // Bankovia
                /* document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;
                document.getElementById('bodyOther').innerHTML = `${d.otherScore}`;*/
                invisible('pre');
                visible('data-pre');
            } 
            catch (error) {
                console.log(error);
                visible('serviceE');
            }
        }
    </script>
</body>
</html>
